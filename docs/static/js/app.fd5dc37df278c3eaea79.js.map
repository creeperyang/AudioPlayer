{"version":3,"sources":["webpack:///./src/components/Loader.vue?8be0","webpack:///src/components/Cover.vue","webpack:///./src/components/Loader.vue","webpack:///src/components/Loader.vue","webpack:///./src/components/Cover.vue?2c07","webpack:///src/components/Timebar.vue","webpack:///./src/components/Timebar.vue?c9b4","webpack:///./src/components/Controller.vue?b015","webpack:///src/components/Player.vue","webpack:///./src/components/Cover.vue","webpack:///./src/components/Timebar.vue","webpack:///./src/components/Controller.vue","webpack:///src/components/Controller.vue","webpack:///./src/components/Player.vue?5004","webpack:///./src/store.js","webpack:///src/App.vue","webpack:///./src/components/Player.vue","webpack:///./src/App.vue?dd1d","webpack:///./src/App.vue","webpack:///./src/router/index.js","webpack:///./src/main.js"],"names":["components_Loader","render","this","$createElement","_self","_c","_m","staticRenderFns","_h","staticClass","Cover","bytes","length","slice","result","data","Loader","__webpack_require__","normalizeComponent","ssrContext","components_Cover","attrs","src","imgUrl","formatTime","t","second","Timebar","current","count","components_Timebar","_vm","style","width","_v","_s","curTime","totalTime","components_Controller","on","click","$event","switchMusic","xlink:href","playOrPauseMusic","title","url","_this","destroy","setup","onload","XMLHttpRequest","request","e","send","response","audioData","tag","decodeAudioData","buffer","duration","err","webkitAudioContext","AudioContext","createBufferSource","createAnalyser","analyser","scriptNode","destination","inputBuffer","outputBuffer","channel","sample","direction","index","Cover_normalizeComponent","Timebar_normalizeComponent","Controller","Controller_normalizeComponent","playing","components_Player","mime","cover","currentTime","artist","play","resumeMusic","pause","pauseMusic","next","prev","src_store","state","musicList","App","Player","Player_normalizeComponent","selectortype_template_index_0_src_App","id","initialIndex","src_App","App_normalizeComponent","vue_runtime_esm","use","vue_router_esm","router","routes","config","productionTip","el","h"],"mappings":"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","file":"static/js/app.fd5dc37df278c3eaea79.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _vm._m(0,false,false)}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"loader\"},[_c('div',{staticClass:\"loader__figure\"})])}]\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-3e25d9e0\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/Loader.vue\n// module id = null\n// module chunks = ","<template>\n  <div class=\"cover\">\n    <img v-if=\"imgUrl\" :src=\"imgUrl\" />\n    <loader v-else />\n  </div>\n</template>\n\n<style lang=\"postcss\" scoped>\n.cover {\n  position: relative;\n  width: 240px;\n  height: 240px;\n}\n.cover img {\n  width: 240px;\n  height: 240px;\n  display: block;\n  border: none;\n  border-radius: 120px;\n  box-shadow: 0px 0px 2px 3px #0b0a31;\n  transform: scale3d(0.82, 0.82, 1);\n}\n</style>\n\n<script>\nimport Loader from './Loader'\n\nfunction convertUint8ArrayToBase64 (bytes) {\n  // prevent Maximum call stack size exceeded\n  const chunkSize = 0x8000\n  let index = 0\n  let length = bytes.length\n  let result = ''\n  let slice\n  while (index < length) {\n    slice = bytes.slice(index, Math.min(index + chunkSize, length))\n    result += String.fromCharCode.apply(null, slice)\n    index += chunkSize\n  }\n  return btoa(result)\n}\n\nexport default {\n  name: 'cover',\n  props: ['data', 'mime'],\n  methods: {},\n  computed: {\n    imgUrl () {\n      if (this.data instanceof Uint8Array) {\n        return `data:${this.mime};base64,${convertUint8ArrayToBase64(this.data)}`\n      }\n      return this.data\n    }\n  },\n  components: {\n    Loader\n  }\n}\n</script>\n\n\n\n\n// WEBPACK FOOTER //\n// src/components/Cover.vue","function injectStyle (ssrContext) {\n  require(\"!!../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-3e25d9e0\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../node_modules/vue-loader/lib/selector?type=styles&index=0!./Loader.vue\")\n}\nvar normalizeComponent = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nimport __vue_script__ from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./Loader.vue\"\n/* template */\nimport __vue_template__ from \"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-3e25d9e0\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./Loader.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-3e25d9e0\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/Loader.vue\n// module id = null\n// module chunks = ","<template>\n  <div class=\"loader\">\n    <div class=\"loader__figure\"></div>\n  </div>\n</template>\n\n<style scoped>\n.loader,\n.loader__figure {\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  transform: translate(-50%, -50%);\n}\n\n.loader {\n  overflow: visible;\n  padding-top: 2em;\n  height: 0;\n  width: 2em;\n}\n\n.loader__figure {\n  height: 0;\n  width: 0;\n  box-sizing: border-box;\n  border: 0 solid rgb(204,161,49);\n  border-radius: 50%;\n  animation: loader-figure 1.15s infinite cubic-bezier(0.215, 0.61, 0.355, 1);\n}\n\n@keyframes loader-figure {\n  0% {\n    height: 0;\n    width: 0;\n    background-color: rgb(204,161,49);\n  }\n  29% {\n    background-color: rgb(204,161,49);\n  }\n  30% {\n    height: 2em;\n    width: 2em;\n    background-color: transparent;\n    border-width: 1em;\n    opacity: 1;\n  }\n  100% {\n    height: 2em;\n    width: 2em;\n    border-width: 0;\n    opacity: 0;\n    background-color: transparent;\n  }\n}\n</style>\n\n<script>\n// https://codepen.io/a-guerrero/pen/XbyPEj\nexport default {\n  name: 'loader'\n}\n</script>\n\n\n\n// WEBPACK FOOTER //\n// src/components/Loader.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"cover\"},[(_vm.imgUrl)?_c('img',{attrs:{\"src\":_vm.imgUrl}}):_c('loader')],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-687271f0\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/Cover.vue\n// module id = null\n// module chunks = ","<template>\n  <div class=\"wrapper\">\n    <div class=\"bar\" :style=\"{width}\">\n      <div class=\"bar-inner\" :style=\"transformStyle\"></div>\n    </div>\n    <div class=\"time\">\n      <span class=\"mark\">{{curTime}}</span>\n      <span class=\"mark\">{{totalTime}}</span>\n    </div>\n  </div>\n</template>\n\n<style lang=\"postcss\" scoped>\n.wrapper {\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  margin: 24px auto 8px;\n}\n.bar {\n  position: relative;\n  width: 240px;\n  height: 2px;\n  border-radius: 1px;\n  background-color: #0b0a31;\n  overflow: hidden;\n}\n.bar-inner {\n  position: absolute;\n  top: 0;\n  left: -100%;\n  width: 100%;\n  height: 2px;\n  border-radius: 1px;\n  // background-color: rgb(220,31,48);\n  background-color: rgb(204,161,49);\n}\n.time {\n  display: flex;\n  flex-direction: row;\n  justify-content: space-between;\n  align-items: center;\n\n  // color: #6c7ce8;\n  color: rgb(77,77,137);\n  font-size: 12px;\n}\n.mark {\n  transform: translate3d(0, 0, 0);\n  line-height: 1.6;\n}\n</style>\n\n\n<script>\nconst formatTime = (t) => {\n  const second = t % 60\n  const minute = (t - second) / 60\n  return t < 60 ? (t | 0) : `${minute}:${\n    second < 10 ? ('0' + (second | 0)) : (second | 0)\n  }`\n}\n\nexport default {\n  name: 'timebar',\n  props: ['current', 'count', 'width'],\n  computed: {\n    transformStyle () {\n      const right = (this.current / this.count * 100).toFixed(4) + '%'\n      return {\n        transform: `translate3d(${right},0,0)`\n      }\n    },\n    curTime () {\n      return formatTime(this.current)\n    },\n    totalTime () {\n      return formatTime(this.count)\n    }\n  }\n}\n</script>\n\n\n\n\n// WEBPACK FOOTER //\n// src/components/Timebar.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"wrapper\"},[_c('div',{staticClass:\"bar\",style:({width: _vm.width})},[_c('div',{staticClass:\"bar-inner\",style:(_vm.transformStyle)})]),_vm._v(\" \"),_c('div',{staticClass:\"time\"},[_c('span',{staticClass:\"mark\"},[_vm._v(_vm._s(_vm.curTime))]),_vm._v(\" \"),_c('span',{staticClass:\"mark\"},[_vm._v(_vm._s(_vm.totalTime))])])])}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-898bd0e8\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/Timebar.vue\n// module id = null\n// module chunks = ","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"ctrl-container\"},[_c('svg',{staticClass:\"ctrl-icon icon-skip-back\",on:{\"click\":function($event){_vm.switchMusic(-1)}}},[_c('use',{attrs:{\"xlink:href\":\"../../static/svgdefs.svg#icon-skip-back\"}})]),_vm._v(\" \"),(_vm.playing)?_c('svg',{staticClass:\"ctrl-icon icon-play\",on:{\"click\":_vm.playOrPauseMusic}},[_c('use',{attrs:{\"xlink:href\":\"../../static/svgdefs.svg#icon-play\"}})]):_c('svg',{staticClass:\"ctrl-icon icon-play\",on:{\"click\":_vm.playOrPauseMusic}},[_c('use',{attrs:{\"xlink:href\":\"../../static/svgdefs.svg#icon-pause\"}})]),_vm._v(\" \"),_c('svg',{staticClass:\"ctrl-icon icon-skip-forward\",on:{\"click\":function($event){_vm.switchMusic(1)}}},[_c('use',{attrs:{\"xlink:href\":\"../../static/svgdefs.svg#icon-skip-forward\"}})])])}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-7622cc5c\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/Controller.vue\n// module id = null\n// module chunks = ","<template>\n  <main class=\"container\">\n    <header class=\"header\">\n      <svg class=\"icon-headphones\">\n        <use xlink:href=\"../../static/svgdefs.svg#icon-headphones\"></use>\n      </svg>\n      <span class=\"title\">Creeper's Player</span>\n    </header>\n    <Cover :mime=\"cover.mime\" :data=\"cover.data\" />\n    <Timebar :count=\"duration\" :current=\"currentTime\" :width=\"300\"/>\n    <section class=\"metadata\">\n      <p class=\"music-title\">{{tag.title || ' '}}</p>\n      <p class=\"music-artist\">{{tag.artist || ' '}}</p>\n    </section>\n    <controller\n      v-on:play=\"resumeMusic\"\n      v-on:pause=\"pauseMusic\"\n      v-on:next=\"switchMusic(1)\"\n      v-on:prev=\"switchMusic(-1)\"\n    />\n    <div class=\"words\">\n      最怕有一天，突然就听懂了一首歌\n    </div>\n  </main>\n</template>\n\n<style scoped>\n  .container {\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    width: 100%;\n    height: 100%;\n    margin: 0 auto;\n  }\n  @media screen and (min-width: 451px) {\n    .container {\n      box-shadow: 0 0 16px 4px rgba(15, 14, 56, 0.65);\n      margin-top: 16px;\n      margin-bottom: 16px;\n      border-radius: 16px;\n      height: initial;\n      width: 350px;\n    }\n  }\n  .header {\n    display: flex;\n    justify-content: flex-start;\n    align-items: center;\n    width: 100%;\n    padding: 24px 0 40px;\n    font-size: 20px;\n    color: #0b0a31;\n    /* color: rgb(220,31,48); */\n  }\n  .icon-headphones {\n    margin-left: 24px;\n    margin-right: 12px;\n    fill: #0b0a31;\n    width: 24px;\n    height: 24px;\n  }\n  .metadata {\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n  }\n  .music-title {\n    font-size: 16px;\n    color: #d2d2ea;\n    margin: 0;\n  }\n  .music-artist {\n    font-size: 12px;\n    color: rgb(77, 77, 137);\n    margin: 0;\n  }\n  .words {\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    width: 100%;\n    padding: 16px 0 24px;\n    font-size: 12px;\n    color: #0b0a31;\n  }\n</style>\n\n<script>\nimport { parse } from 'id3-parser'\n// import { fetchFileAsBuffer } from 'id3-parser/lib/universal/helpers'\nimport Cover from './Cover'\nimport Timebar from './Timebar'\nimport Controller from './Controller'\n\nfunction fetchAudio (url, onload) {\n  const request = new XMLHttpRequest()\n  request.open('GET', url, true)\n  request.responseType = 'arraybuffer'\n  request.onload = () => onload(request)\n  request.onerror = (e) => console.log(e)\n  request.send()\n}\n\nexport default {\n  name: 'Player',\n  props: ['musicList', 'initialIndex'],\n  data () {\n    return {\n      title: `Creeper's player`,\n      currentIndex: this.initialIndex || 0,\n      tag: {},\n      duration: 100,\n      currentTime: 0\n    }\n  },\n  computed: {\n    cover () {\n      return this.tag.image || {}\n    }\n  },\n  mounted () {\n    if (!this.musicList || !this.musicList.length) return\n\n    const url = this.musicList[this.currentIndex].url\n    this.play(url)\n  },\n  methods: {\n    play (url) {\n      this.destroy()\n      this.setup()\n      fetchAudio(url, request => {\n        const audioData = request.response\n        const tag = parse(new Uint8Array(audioData))\n        this.tag = tag\n        this.audioCtx.decodeAudioData(\n          audioData,\n          buffer => {\n            this.sourceNode.buffer = buffer\n            this.sourceNode.start(0)\n            this.duration = buffer.duration\n          },\n          e => {\n            console.log('Error with decoding audio data' + e.err)\n          }\n        )\n      })\n    },\n    setup () {\n      const AudioContext = window.AudioContext || window.webkitAudioContext\n      // Create AudioContext and buffer sourceNode\n      const audioCtx = (this.audioCtx = new AudioContext())\n      this.sourceNode = audioCtx.createBufferSource()\n      this.scriptNode = audioCtx.createScriptProcessor(4096, 1, 1)\n      this.analyser = audioCtx.createAnalyser()\n      this.analyser.smoothingTimeConstant = 0.5\n      this.analyser.fftSize = 1024\n      this.analyser.maxDecibels = 80\n\n      this.sourceNode.connect(this.analyser)\n      this.analyser.connect(this.scriptNode)\n      this.scriptNode.connect(audioCtx.destination)\n\n      this.scriptNode.onaudioprocess = this.onAudioProcess.bind(this)\n      this.sourceNode.onended = this.onEnded.bind(this)\n    },\n    destroy () {\n      if (this.sourceNode) {\n        this.sourceNode.disconnect(this.analyser)\n        this.sourceNode.onended = null\n        this.sourceNode = null\n      }\n      if (this.analyser) {\n        this.analyser.disconnect(this.scriptNode)\n        this.analyser = null\n      }\n      if (this.scriptNode) {\n        this.scriptNode.disconnect(this.audioCtx.destination)\n        this.scriptNode.onaudioprocess = null\n        this.scriptNode = null\n      }\n    },\n    onAudioProcess (audioProcessingEvent) {\n      // The input buffer is the song we loaded earlier\n      const inputBuffer = audioProcessingEvent.inputBuffer\n      // The output buffer contains the samples that will be modified and played\n      const outputBuffer = audioProcessingEvent.outputBuffer\n\n      // Loop through the output channels (in this case there is only one)\n      for (let channel = 0; channel < outputBuffer.numberOfChannels; channel++) {\n        let inputData = inputBuffer.getChannelData(channel)\n        let outputData = outputBuffer.getChannelData(channel)\n\n        // Loop through the 4096 samples\n        for (let sample = 0; sample < inputBuffer.length; sample++) {\n          // make output equal to the same as the input\n          outputData[sample] = inputData[sample]\n        }\n      }\n      // Update timebar\n      this.currentTime += inputBuffer.duration\n      if (this.currentTime > this.duration) {\n        this.currentTime = this.duration\n      }\n      // drawSpectrum();\n    },\n    onEnded () {\n      this.destroy()\n      this.switchMusic(1)\n    },\n    pauseMusic () {\n      this.scriptNode.disconnect(this.audioCtx.destination)\n    },\n    resumeMusic () {\n      this.scriptNode.connect(this.audioCtx.destination)\n    },\n    switchMusic (direction) {\n      let index = this.currentIndex + direction\n      if (index < 0) {\n        index = this.musicList.length - 1\n      } else if (index > this.musicList.length - 1) {\n        index = 0\n      }\n      this.currentIndex = index\n      this.duration = 0\n      // Now dont clear tag info, just replace it when new file parsed.\n      // this.tag = {}\n      this.play(this.musicList[index].url)\n    }\n  },\n  components: {\n    Cover,\n    Timebar,\n    Controller\n  }\n}\n</script>\n\n\n\n// WEBPACK FOOTER //\n// src/components/Player.vue","function injectStyle (ssrContext) {\n  require(\"!!../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-687271f0\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../node_modules/vue-loader/lib/selector?type=styles&index=0!./Cover.vue\")\n}\nvar normalizeComponent = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nimport __vue_script__ from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./Cover.vue\"\n/* template */\nimport __vue_template__ from \"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-687271f0\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./Cover.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-687271f0\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/Cover.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-898bd0e8\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../node_modules/vue-loader/lib/selector?type=styles&index=0!./Timebar.vue\")\n}\nvar normalizeComponent = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nimport __vue_script__ from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./Timebar.vue\"\n/* template */\nimport __vue_template__ from \"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-898bd0e8\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./Timebar.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-898bd0e8\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/Timebar.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-7622cc5c\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../node_modules/vue-loader/lib/selector?type=styles&index=0!./Controller.vue\")\n}\nvar normalizeComponent = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nimport __vue_script__ from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./Controller.vue\"\n/* template */\nimport __vue_template__ from \"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-7622cc5c\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./Controller.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-7622cc5c\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/Controller.vue\n// module id = null\n// module chunks = ","<template>\n  <div class=\"ctrl-container\">\n    <svg class=\"ctrl-icon icon-skip-back\" v-on:click=\"switchMusic(-1)\">\n      <use xlink:href=\"../../static/svgdefs.svg#icon-skip-back\"></use>\n    </svg>\n    <svg class=\"ctrl-icon icon-play\" v-if=\"playing\" v-on:click=\"playOrPauseMusic\">\n      <use xlink:href=\"../../static/svgdefs.svg#icon-play\"></use>\n    </svg>\n    <svg class=\"ctrl-icon icon-play\" v-else v-on:click=\"playOrPauseMusic\">\n      <use xlink:href=\"../../static/svgdefs.svg#icon-pause\"></use>\n    </svg>\n    <svg class=\"ctrl-icon icon-skip-forward\" v-on:click=\"switchMusic(1)\">\n      <use xlink:href=\"../../static/svgdefs.svg#icon-skip-forward\"></use>\n    </svg>\n  </div>\n</template>\n\n<style scoped>\n.ctrl-container {\n  display: flex;\n  flex-direction: row;\n  justify-content: space-around;\n  align-items: center;\n}\n.ctrl-icon {\n  fill: #f0f0f0;\n  width: 20px;\n  height: 20px;\n  cursor: pointer;\n  transition: all 0.2s ease;\n}\n.ctrl-icon:hover {\n  fill: #fff;\n  transform: scale3d(1.1, 1.1, 1.1);\n}\n.icon-play {\n  width: 44px;\n  height: 44px;\n  margin: 16px 30px;\n}\n</style>\n\n\n<script>\nexport default {\n  name: 'controller',\n  data () {\n    return {\n      playing: true\n    }\n  },\n  methods: {\n    playOrPauseMusic () {\n      this.playing = !this.playing\n      this.$emit(this.playing ? 'play' : 'pause')\n    },\n    switchMusic (delta) {\n      this.$emit(delta > 0 ? 'next' : 'prev')\n    }\n  }\n}\n</script>\n\n\n\n// WEBPACK FOOTER //\n// src/components/Controller.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('main',{staticClass:\"container\"},[_c('header',{staticClass:\"header\"},[_c('svg',{staticClass:\"icon-headphones\"},[_c('use',{attrs:{\"xlink:href\":\"../../static/svgdefs.svg#icon-headphones\"}})]),_vm._v(\" \"),_c('span',{staticClass:\"title\"},[_vm._v(\"Creeper's Player\")])]),_vm._v(\" \"),_c('Cover',{attrs:{\"mime\":_vm.cover.mime,\"data\":_vm.cover.data}}),_vm._v(\" \"),_c('Timebar',{attrs:{\"count\":_vm.duration,\"current\":_vm.currentTime,\"width\":300}}),_vm._v(\" \"),_c('section',{staticClass:\"metadata\"},[_c('p',{staticClass:\"music-title\"},[_vm._v(_vm._s(_vm.tag.title || ' '))]),_vm._v(\" \"),_c('p',{staticClass:\"music-artist\"},[_vm._v(_vm._s(_vm.tag.artist || ' '))])]),_vm._v(\" \"),_c('controller',{on:{\"play\":_vm.resumeMusic,\"pause\":_vm.pauseMusic,\"next\":function($event){_vm.switchMusic(1)},\"prev\":function($event){_vm.switchMusic(-1)}}}),_vm._v(\" \"),_c('div',{staticClass:\"words\"},[_vm._v(\"\\n    最怕有一天，突然就听懂了一首歌\\n  \")])],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-94ba379e\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/Player.vue\n// module id = null\n// module chunks = ","const store = {\n  state: {\n    musicList: [{\n      url: 'http://7sbnba.com1.z0.glb.clouddn.com/music-Walk Away.mp3'\n    }, {\n      url: 'http://7sbnba.com1.z0.glb.clouddn.com/music-红玫瑰.mp3'\n    }, {\n      url: 'http://7sbnba.com1.z0.glb.clouddn.com/music-原谅.mp3'\n    }, {\n      url: 'http://7sbnba.com1.z0.glb.clouddn.com/music-我们怎么了.mp3'\n    }, {\n      url: 'http://7sbnba.com1.z0.glb.clouddn.com/music-遥远的她.mp3'\n    }, {\n      url: 'http://7sbnba.com1.z0.glb.clouddn.com/music-魔鬼中的天使.mp3'\n    }, {\n      url: 'http://7sbnba.com1.z0.glb.clouddn.com/music-Apologize.mp3'\n    }, {\n      url: 'http://7sbnba.com1.z0.glb.clouddn.com/music-改造人.mp3'\n    }]\n  }\n}\n\nexport default store\n\n\n\n// WEBPACK FOOTER //\n// ./src/store.js","<template>\n  <div id=\"app\">\n    <player :musicList=\"musicList\" :initialIndex=\"0\"/>\n    <router-view/>\n  </div>\n</template>\n\n<script>\nimport Player from '@/components/Player'\nimport store from '@/store'\n\nexport default {\n  name: 'app',\n  data () {\n    return {\n      musicList: store.state.musicList\n    }\n  },\n  components: {\n    Player\n  }\n}\n</script>\n\n<style>\nbody {\n  margin: 0;\n  padding: 0;\n  background: rgb(32, 31, 74)\n}\n#app {\n  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n  width: 100vw;\n  height: 100vh;\n  margin: auto;\n}\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/App.vue","function injectStyle (ssrContext) {\n  require(\"!!../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-94ba379e\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../node_modules/vue-loader/lib/selector?type=styles&index=0!./Player.vue\")\n}\nvar normalizeComponent = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nimport __vue_script__ from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./Player.vue\"\n/* template */\nimport __vue_template__ from \"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-94ba379e\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./Player.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-94ba379e\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/Player.vue\n// module id = null\n// module chunks = ","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"app\"}},[_c('player',{attrs:{\"musicList\":_vm.musicList,\"initialIndex\":0}}),_vm._v(\" \"),_c('router-view')],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-392629d2\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/App.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-392629d2\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!../node_modules/vue-loader/lib/selector?type=styles&index=0!./App.vue\")\n}\nvar normalizeComponent = require(\"!../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nimport __vue_script__ from \"!!babel-loader!../node_modules/vue-loader/lib/selector?type=script&index=0!./App.vue\"\n/* template */\nimport __vue_template__ from \"!!../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-392629d2\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../node_modules/vue-loader/lib/selector?type=template&index=0!./App.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/App.vue\n// module id = null\n// module chunks = ","import Vue from 'vue'\nimport Router from 'vue-router'\n// import Player from '@/components/Player'\n\nVue.use(Router)\n\nexport default new Router({\n  routes: [\n    // {\n    //   path: '/',\n    //   name: 'Player',\n    //   component: Player\n    // }\n  ]\n})\n\n\n\n// WEBPACK FOOTER //\n// ./src/router/index.js","import Vue from 'vue'\nimport App from './App'\nimport router from './router'\n\nVue.config.productionTip = false\n\n/* eslint-disable no-new */\nnew Vue({\n  el: '#app',\n  router,\n  render: h => h(App)\n})\n\n\n\n// WEBPACK FOOTER //\n// ./src/main.js"],"sourceRoot":""}